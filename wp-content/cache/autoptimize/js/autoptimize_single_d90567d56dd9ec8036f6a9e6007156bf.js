jQuery(document).ready(function($){jQuery(document).on('click','.catalog__compare',function(event){event.preventDefault();let curr_element=jQuery(this);let curr_type=curr_element.data('prtype');let curr_p_id=curr_element.data('prid');let product_arr=Cookies.get(curr_type);let total_count=Cookies.get('total_count');let temp_count=parseInt(total_count);if(temp_count<=0){Cookies.remove('total_count');}
let first_post=0;if(product_arr!==undefined){product_arr=JSON.parse(product_arr);let trigger=1;for(let i=0;i<product_arr.length;i++){if(product_arr[i]===curr_p_id){trigger=0;break;}}
if(trigger===1){product_arr.push(curr_p_id);Cookies.set(curr_type,JSON.stringify(product_arr));if(total_count!==undefined){total_count=parseInt(total_count);total_count++;Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);}
let cat_element=$('#'+curr_type+'-tab');let result=cat_element.text().split(' ');cat_element.text(result[0]+' ('+product_arr.length+')');}}else{first_post=1;let product_arr_empty=[curr_p_id,];Cookies.set(curr_type,JSON.stringify(product_arr_empty));}
curr_element.addClass('is-active');if(total_count===undefined){Cookies.set('total_count',parseInt(1));jQuery('.compare-link').addClass('has-quant').append('<div class="quant">'+1+'</div>');}else{Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);}
if(first_post===1){window.location.reload();}});jQuery(document).on('click','#single-compare',function(event){event.preventDefault();let curr_element=jQuery(this);let curr_type=curr_element.data('prtype');let curr_p_id=curr_element.data('prid');let product_arr=Cookies.get(curr_type);let total_count=Cookies.get('total_count');let first_post=0;if(product_arr!==undefined){product_arr=JSON.parse(product_arr);let trigger=1;for(let i=0;i<product_arr.length;i++){if(product_arr[i]===curr_p_id){trigger=0;break;}}
if(trigger===1){product_arr.push(curr_p_id);Cookies.set(curr_type,JSON.stringify(product_arr));total_count=parseInt(total_count);total_count++;Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);let cat_element=$('#'+curr_type+'-tab');let result=cat_element.text().split(' ');cat_element.text(result[0]+' ('+product_arr.length+')');}}else{first_post=1;let product_arr_empty=[curr_p_id,];Cookies.set(curr_type,JSON.stringify(product_arr_empty));}
curr_element.addClass('active');if(total_count===undefined){Cookies.set('total_count',parseInt(1));jQuery('.compare-link').addClass('has-quant').append('<div class="quant">'+1+'</div>');}
if(first_post===1){window.location.reload();}});jQuery(document).on('click','.catalog__clear',function(event){event.preventDefault();let curr_element=jQuery(this);let curr_type=curr_element.data('prtype');let curr_p_id=curr_element.data('prid');let product_arr=Cookies.get(curr_type);let total_count=Cookies.get('total_count');if(product_arr!==undefined){product_arr=JSON.parse(product_arr);for(let i=0;i<product_arr.length;i++){if(product_arr[i]===curr_p_id){product_arr.splice(i,1);}}
total_count=parseInt(total_count);total_count--;if(product_arr.length===0){Cookies.remove(curr_type);if(total_count===0){Cookies.remove('total_count');window.location.replace(wpAjax.home_url);}}else{Cookies.set(curr_type,JSON.stringify(product_arr));Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);let cat_element=$('#'+curr_type+'-tab');let result=cat_element.text().split(' ');cat_element.text(result[0]+' ('+total_count+')');window.location.reload();}}else{window.location.replace(wpAjax.home_url);}});jQuery(document).on('click','#clear-all',function(event){event.preventDefault();let curr_element=jQuery(this);let curr_type=curr_element.data('prtype');let product_arr=Cookies.get(curr_type);let total_count=Cookies.get('total_count');total_count=parseInt(total_count);product_arr=JSON.parse(product_arr);total_count=total_count-product_arr.length;if(total_count!==0){Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);}else{Cookies.remove('total_count');}
Cookies.remove(curr_type);window.location.replace(wpAjax.home_url);});jQuery(document).on('click','.compare-popup__clear',function(event){event.preventDefault();let curr_element=jQuery(this);let curr_type=curr_element.data('prtype');let product_arr=Cookies.get(curr_type);let total_count=Cookies.get('total_count');total_count=parseInt(total_count);product_arr=JSON.parse(product_arr);total_count=total_count-product_arr.length;if(total_count!==0){Cookies.set('total_count',total_count);jQuery('.quant').text(total_count);}else{Cookies.remove('total_count');}
Cookies.remove(curr_type);window.location.reload();});});